<div class="mcp-panel">
    <details name="mcp_panel" open>
        <summary>Sessions ({{sessions.length}})</summary>
        <div v-if="sessions.length > 0">
            <div v-for="session in sessions" :key="session.id" class="session-item" :title="session.id">
                <span class="session-id">{{formatSessionId(session)}}</span>
                <span class="session-time">{{formatTime(session.connectedAt)}}</span>
            </div>
        </div>
        <div v-else class="no-sessions">
            No clients connected
        </div>
    </details>
    <details name="mcp_panel">
        <summary>Server</summary>
        <dl>
            <dt>Server Name</dt>
            <dd>{{server.name}}</dd>
            <dt>Server Version</dt>
            <dd>{{server.version}}</dd>
            <dt>Connected Clients</dt>
            <dd>{{sessions.length}}</dd>
        </dl>
    </details>
    <details name="mcp_panel">
        <summary>Tools</summary>

        <div v-if="tools.length > 0">
            <div v-for="tool in tools" :key="tool.name" class="tool-toggle-row clickable"
                @click="openToolTest(tool.name)" :title="'Click to test ' + getDisplayName(tool.name)">
                <div class="tool-info">
                    <div class="tool-name">
                        {{getDisplayName(tool.name)}}
                        <span :class="['tool-status', tool.status]">{{tool.status}}</span>
                    </div>
                    <div class="tool-description" :title="tool.description">{{tool.description}}</div>
                </div>
            </div>
        </div>
        <div v-else>
            <p>No tools available.</p>
        </div>
    </details>
    <details name="mcp_panel">
        <summary>Resources</summary>

        <div v-if="resources.length > 0">
            <div v-for="resource in resources" :key="resource.name" class="tool-toggle-row">
                <div class="tool-info">
                    <div class="tool-name">{{getDisplayName(resource.name)}}</div>
                    <div class="tool-description" :title="resource.description">{{resource.description}}</div>
                    <div class="tool-description" style="font-style: italic; margin-top: 2px;"
                        :title="resource.uriTemplate">{{resource.uriTemplate}}</div>
                </div>
            </div>
        </div>
        <div v-else>
            <p>No resources available.</p>
        </div>
    </details>
    <details name="mcp_panel">
        <summary>Prompts</summary>

        <div v-if="prompts.length > 0">
            <div v-for="prompt in prompts" :key="prompt.name" class="tool-toggle-row clickable"
                @click="openPromptPreview(prompt.name)" :title="'Click to preview ' + getDisplayName(prompt.name)">
                <div class="tool-info">
                    <div class="tool-name">
                        {{getDisplayName(prompt.name)}}
                        <span :class="['tool-status', prompt.status]">{{prompt.status}}</span>
                    </div>
                    <div class="tool-description" :title="prompt.description">{{prompt.description}}</div>
                    <div v-if="prompt.argumentCount > 0" class="tool-description" style="font-style: italic; margin-top: 2px;">
                        {{prompt.argumentCount}} argument{{prompt.argumentCount > 1 ? 's' : ''}}
                    </div>
                </div>
            </div>
        </div>
        <div v-else>
            <p>No prompts available.</p>
        </div>
    </details>
</div>